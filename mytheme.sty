\ProvidesPackage{mastersthesis}

% Preamble
% ------------------------------------------------------------------------------------
\graphicspath{{images/}}
\usepackage{wrapfig, rotating, xcolor, ragged2e}
\usepackage{tikz, pgfplots}
\usepgflibrary{shadings}
\usetikzlibrary{positioning, shapes.geometric, fit}
\usepackage{textpos}        % print logo at side of headbar
\usepackage{amsmath, amssymb}
\usepackage[most]{tcolorbox}

\setbeamertemplate{bibliography item}[text]
\setcounter{tocdepth}{1}

% THEMES Options
% --------------------------------------------------------------------------------------
\usetheme{Boadilla}
% \usetheme{Madrid}
\useinnertheme{rectangles}

\definecolor{burgundy}{rgb}{0.5 0 0.15}      %for custom colortheme
% \usecolortheme[named=burgundy]{structure}


\setbeamertemplate{navigation symbols}{}
\setbeamersize{text margin left=5mm, text margin right=5mm} % textmargin

\setbeamercolor{frametitle}{bg=blue, fg=white}
\setbeamercolor{author in head/foot}{bg=blue}
\setbeamercolor{title in head/foot}{bg=red!75!black}
\setbeamercolor{page number in head/foot}{bg=blue, fg=white}

%\setbeamercolor{background canvas}{bg=gray!10}

% Frametitle
% ---------------------------------------------------------------------------------------
\colorlet{titleleft}{blue}
\colorlet{titleright}{blue}

\makeatletter
\pgfdeclarehorizontalshading[titleleft,titleright]{beamer@frametitleshade}{\paperheight}{%
  color(0pt)=(titleleft);
  color(\paperwidth)=(titleright)}

\defbeamertemplate*{frametitle}{horizontal shading}
{%
  \nointerlineskip%
  %\vskip-2pt%
  \hbox{\leavevmode
    \advance\beamer@leftmargin by -12bp%
    \advance\beamer@rightmargin by -12bp%
    \beamer@tempdim=\textwidth%
    \advance\beamer@tempdim by \beamer@leftmargin%
    \advance\beamer@tempdim by \beamer@rightmargin%
    \hskip-\Gm@lmargin\hbox{%
      \setbox\beamer@tempbox=\hbox{\begin{minipage}[b]{\paperwidth}%
          \vbox{}\vskip-.75ex%
          \leftskip0.3cm%
          \rightskip0.3cm plus1fil\leavevmode
          \insertframetitle%
          \ifx\insertframesubtitle\@empty%
            \strut\par%
          \else
            \par{\usebeamerfont*{framesubtitle}{\usebeamercolor[fg]{framesubtitle}\insertframesubtitle}\strut\par}%
          \fi%
          \nointerlineskip
          \vbox{}%
          \end{minipage}}%
      \beamer@tempdim=\ht\beamer@tempbox%
      \advance\beamer@tempdim by 2pt%
      \begin{pgfpicture}{0pt}{0pt}{\paperwidth}{\beamer@tempdim}
        \usebeamercolor{frametitle right}
        \pgfpathrectangle{\pgfpointorigin}{\pgfpoint{\paperwidth}{\beamer@tempdim}}
        \pgfusepath{clip}
        \pgftext[left,base]{\pgfuseshading{beamer@frametitleshade}}
      \end{pgfpicture}
      \hskip-\paperwidth%
      \box\beamer@tempbox%
    }%
    \hskip-\Gm@rmargin%
  }%
    \vskip-2pt
}
\makeatother

% Foot-line
% -----------------------------------------------------------------------------------------
\newcommand{\myfootline}{\setbeamertemplate{footline}{
    \leavevmode
    \begin{beamercolorbox}[wd=0.33\paperwidth, ht=6pt, dp=2.5pt, center]{author in head/foot}
      \insertshortauthor~(\insertshortinstitute)
    \end{beamercolorbox}%
    \begin{beamercolorbox}[wd=0.4\paperwidth, ht=6pt, dp=2.5pt, center]{title in head/foot}
     \insertsubsection
       \end{beamercolorbox}%
     \begin{beamercolorbox}[wd=0.3\paperwidth, ht=6pt, dp=2.5pt, center]{page number in head/foot}
       \insertframenumber/\inserttotalframenumber
     \end{beamercolorbox}%
  }}


% Title page definition
% -------------------------------------------------------------------------------------------
\newcommand{\tikzonlytitlepage}{
  \setbeamertemplate{title page}{
    \begin{tikzpicture}
      \hspace{5mm}
      \node[
      fill=blue!85!violet,
      inner ysep=7pt,
      text width=0.8\linewidth,
      minimum width=0.8\linewidth,
      minimum height=9mm,
      align=center,
      text=white
      ] (title) {\bfseries \large \inserttitle};

      \node[
      above of= title,
      shade,
      left color= cyan!85!,
      yshift=2mm,
      inner xsep=7mm,
      text=burgundy,
      minimum width=0.9\linewidth,
      minimum height=4mm,
      text width=0.8\linewidth
      ] (inst) {\footnotesize \bfseries \insertinstitute};

      \node[
      right of=inst,
      xshift=25mm,
      yshift=5mm,
      inner sep=0pt,
      ]
      (logo) {\includegraphics[height=15mm, width=13mm]{tulogo.png}};

      \node[
      below of=title,
      shade,
      top color=white,
      bottom color= brown!70,
      inner xsep=9mm,
      inner ysep=2mm,
      xshift=-2mm,
      yshift=-15mm,
      text=blue,
      minimum width=0.6\linewidth,
      text width=0.6\linewidth
      ] (author) {{\color{burgundy} \underline {\small \textbf{ Presenter:}}}\\[1mm]
         \textcolor{blue} {\insertauthor} \\ {\small \color{violet} Roll no: 43 \hspace{5mm} Batch: 2077}};

      \node[
      below of=author,
      shade,
      top color=white,
      bottom color= brown!70,
      inner xsep=9mm,
      inner ysep=2mm,
      yshift=-10mm,
      text=blue,
      minimum width=0.6\linewidth,
      text width=0.6\linewidth
      ] (supervisor) {{\color{burgundy} \underline {\small \textbf{Supervisor:}}}\\[1mm]
        {\color{blue} \small Asoc. Prof. Tulasi Prasad Nepal}};

      \node[
      right of=author,
      xshift=25mm,
      yshift=-3mm,
      inner xsep=-1pt,
      inner ysep=-1pt,
      draw=brown!80!black,
      shade,
      inner color=blue!55,
      ellipse,
      ultra thick
      ]
      (pic) {\includegraphics[height=23mm, width=19mm]{mypicrm2.png}};

      \node[
      below of=supervisor,
      shade,
      left color=blue,
      right color=red,
      yshift=-9mm,
      text=white,
      minimum width=0.7\linewidth,
      ] (date) {\small \bfseries \insertdate};
    \end{tikzpicture}
  }}

\addtobeamertemplate{frametitle}{}{
\begin{textblock*}{7mm}(110mm,-6mm)
  \includegraphics[height=6mm, width=6mm]{tulogo.png}
\end{textblock*}
}


\makeatletter
\setbeamertemplate{theorem begin}{%
  \begin{tcolorbox}[colframe=white, colback=white, boxsep=-1pt, title={\textcolor{blue}{
        {%
          {\bfseries \inserttheoremnumber.
          \ifx\inserttheoremaddition\@empty\else\ \inserttheoremaddition\fi%
        }}%
      }}]


  }
  \setbeamertemplate{theorem end}{%
  \end{tcolorbox}

}

\makeatother
